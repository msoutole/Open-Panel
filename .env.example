# ==========================================
# OpenPanel Environment Configuration
# ==========================================

# === CORE CONFIG ===
NODE_ENV=development
APP_URL=http://localhost:3000
APP_PORT=3000
API_PORT=3001

# === DATABASE ===
# REQUIRED: PostgreSQL connection string
# For local development (API running outside Docker): use localhost
# For production (API running inside Docker): use postgres
DATABASE_URL=postgresql://openpanel:changeme@localhost:5432/openpanel

# Docker-only variables (for PostgreSQL container)
POSTGRES_USER=openpanel
POSTGRES_PASSWORD=changeme
POSTGRES_DB=openpanel

# === PRISMA ===
# Ignore checksum validation for Prisma engines (useful for offline/restricted networks or WSL2)
PRISMA_ENGINES_CHECKSUM_IGNORE_MISSING=1

# === REDIS ===
# Option 1: Use REDIS_URL (recommended)
# For local development (API running outside Docker): use localhost
# For production (API running inside Docker): use redis
REDIS_URL=redis://:changeme@localhost:6379

# Option 2: Use individual variables (if REDIS_URL not provided)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=changeme

# === JWT ===
# REQUIRED: Must be at least 32 characters for security
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars
# Token expiration times (e.g., 15m, 1h, 7d, 30d)
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# === TRAEFIK ===
TRAEFIK_DASHBOARD=true
TRAEFIK_DASHBOARD_USER=admin
TRAEFIK_DASHBOARD_PASSWORD_HASH=$apr1$xyz...  # Generate with: htpasswd -nb admin password

# Traefik configuration (optional - defaults provided)
TRAEFIK_CONFIG_PATH=/etc/traefik
TRAEFIK_API_URL=http://localhost:8080

# === EMAIL (SMTP) - Optional ===
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# SMTP_FROM=noreply@openpanel.dev

# === AI PROVIDERS (Optional) ===
# Ollama (Local LLM)
# OLLAMA_HOST=http://localhost:11434

# OpenAI
# OPENAI_API_KEY=sk-your-openai-api-key

# Anthropic (Claude)
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# === DOCKER ===
# Optional: Docker connection settings (defaults to socket)
# DOCKER_HOST=localhost
# DOCKER_PORT=2375

# === BACKUPS ===
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30

# S3-Compatible Storage
S3_ENABLED=false
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_BUCKET=openpanel-backups
S3_ACCESS_KEY_ID=your_access_key
S3_SECRET_ACCESS_KEY=your_secret_key

# === DNS PROVIDERS ===
# Cloudflare
CLOUDFLARE_API_TOKEN=your_cloudflare_token
CLOUDFLARE_EMAIL=your_email@example.com

# AWS Route53
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1

# DigitalOcean
DO_API_TOKEN=your_digitalocean_token

# === MONITORING ===
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false
GRAFANA_ADMIN_PASSWORD=changeme

LOKI_ENABLED=false

# === SECURITY ===
# CORS
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Session
SESSION_SECRET=your-session-secret-change-this

# === LOGGING ===
LOG_LEVEL=info
LOG_FORMAT=json

# === FEATURE FLAGS ===
ENABLE_WEBHOOKS=true
ENABLE_AUTO_DEPLOY=true
ENABLE_AGENTS=true

# === MONITORING (Optional) ===
# Sentry error tracking
# SENTRY_DSN=https://your-sentry-dsn

# === DEVELOPMENT ===
DEBUG=false
HOT_RELOAD=true
